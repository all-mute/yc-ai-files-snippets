# Примеры Python-скриптов для работы с Files API Яндекс Облака

Этот репозиторий содержит примеры кода на Python для работы с Files API Яндекс Облака. Каждый скрипт демонстрирует отдельную операцию API и может использоваться как основа для разработки собственных приложений.

## Возможности Files API

Files API предоставляет следующие возможности:
- Загрузка файлов в облако
- Получение метаданных файлов
- Получение URL для доступа к файлам
- Обновление содержимого и метаданных файлов
- Удаление файлов
- Получение списка всех файлов в каталоге

## Предварительные требования

- Python 3.7+
- Аккаунт в Яндекс Облаке
- API-ключ с необходимыми правами
- Идентификатор каталога (folder_id)

## Быстрый старт

1. **Клонирование репозитория**   ```bash
   git clone <repository-url>
   cd <repository-name>   ```

2. **Настройка виртуального окружения**   ```bash
   python -m venv venv
   source venv/bin/activate  # Linux/MacOS
   # или
   venv\Scripts\activate     # Windows   ```

3. **Установка зависимостей**   ```bash
   pip install -r requirements.txt   ```

4. **Настройка конфигурации**
   
   Создайте файл `.env` в корневой директории проекта:   ```
   FOLDER_ID="ваш-folder-id"
   YANDEX_API_KEY="ваш-api-key"   ```

## Описание скриптов

### create_file.py
Создает новый файл в облаке с указанными параметрами:
- Имя файла
- Описание
- MIME-тип
- Метки (labels)
- Настройки срока жизни

## Полезные ссылки

- [Документация Files API](https://server-yfm.website.yandexcloud.net/server-yfm-assistant/ru/ru/foundation-models/files/api-ref/File/index.html)
- [API Reference](https://server-yfm.website.yandexcloud.net/server-yfm-assistant/ru/ru/foundation-models/files/api-ref/File/index.html)
- [Создание API-ключа](https://cloud.yandex.ru/docs/iam/operations/api-key/create)
- [Общая документация Яндекс Облака](https://cloud.yandex.ru/docs)

## Поддержка

При возникновении проблем:
1. Проверьте актуальность документации
2. Убедитесь в правильности учетных данных
3. Проверьте права доступа API-ключа
4. Создайте Issue в репозитории

## Обработка ошибок

Скрипты обрабатывают следующие ситуации:
- Отсутствие файла .env
- Отсутствие необходимых переменных окружения
- Ошибки HTTP-запросов
- Отсутствие file_id.txt для операций с существующим файлом
- Некорректные ответы API

## Примеры использования

### Создание файла с метками
```python
data = {
    "folderId": folder_id,
    "name": "example.txt",
    "labels": {
        "project": "demo",
        "environment": "testing"
    }
}
```

### Обновление с настройкой срока жизни
```python
data = {
    "expirationConfig": {
        "expirationPolicy": "STATIC",
        "ttlDays": "60"
    }
}
```

## Ограничения API

- Максимальный размер файла: 4 MB
- Поддерживаемые форматы: txt, json, jsonl, pdf
- Максимальное количество меток: 64
- Максимальная длина имени файла: 1024 символа
- Максимальная длина описания: 256 символов

## Рекомендации по использованию

1. **Именование файлов**
   - Используйте понятные и уникальные имена
   - Избегайте специальных символов
   - Добавляйте расширение файла

2. **Метки (Labels)**
   - Используйте для категоризации
   - Добавляйте метки окружения
   - Указывайте версии и назначение

3. **Срок жизни файлов**
   - Устанавливайте разумные значения TTL
   - Используйте SINCE_LAST_ACTIVE для временных файлов
   - Применяйте STATIC для важных документов

4. **Безопасность**
   - Регулярно обновляйте API-ключи
   - Не храните учетные данные в коде
   - Используйте минимально необходимые права доступа

## Часто задаваемые вопросы

### Общие вопросы

**В:** Как получить folder_id?
**О:** Folder ID можно найти в настройках каталога в консоли Яндекс Облака.

**В:** Какой тип API-ключа нужен?
**О:** Требуется API-ключ с правами на работу с Files API.

### Технические вопросы

**В:** Почему файл не загружается?
**О:** Проверьте размер файла и поддерживаемый формат.

**В:** Как обновить срок жизни файла?
**О:** Используйте метод update с новым expirationConfig.

## Участие в разработке

1. Fork репозитория
2. Создайте ветку для новой функциональности
3. Внесите изменения
4. Создайте Pull Request

## Лицензия

MIT License. Подробности в файле LICENSE.

## Авторы

Разработано для демонстрации работы с Files API Яндекс Облака.

## Благодарности

- Команде Яндекс Облака за документацию
- Сообществу разработчиков за обратную связь